# init faster
#export skip_global_compinit=1

# all of our zsh files
# typeset -U config_files
# config_files=($ZDOTDIR/**/*.zsh)

## load the path files
# for file in ${(M)config_files:#*/path.zsh}
# do
#   source $file
# done

## load everything but the path and completion files
# for file in ${${config_files:#*/path.zsh}:#*/completion.zsh}
# do
#   source $file
# done

source "$ZDOTDIR/options.zsh"
source "$ZDOTDIR/prompt.zsh"
source "$ZDOTDIR/zplugin.zsh"

# Source aliases
typeset -U aliases_files
aliases_files=($XDG_CONFIG_HOME/**/aliases.zsh)
for file in ${(M)aliases_files}
do
  source $file
done

#[[ -f "$ZDOTDIR/aliases.zsh" ]] && source "$ZDOTDIR/aliases.zsh"

## initialize autocomplete here, otherwise functions won't be loaded
autoload -U compinit
compinit

# load every completion after autocomplete loads
# for file in ${(M)config_files:#*/completion.zsh}
# do
#   source $file
# done

# unset config_files

# disable zsh bundled function mtools command mcd
# which causes a conflict.
compdef -d mcd

bindkey "$terminfo[kcuu1]" history-substring-search-up
bindkey "$terminfo[kcud1]" history-substring-search-down

# Initialization scripts
typeset -U init_files
init_files=($XDG_CONFIG_HOME/**/init.zsh)
for file in ${(M)init_files}
do
  source $file
done

[[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh
